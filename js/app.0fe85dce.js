(function(e){function t(t){for(var r,i,o=t[0],u=t[1],c=t[2],d=0,p=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);l&&l(t);while(p.length)p.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,o=1;o<n.length;o++){var u=n[o];0!==a[u]&&(r=!1)}r&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},s=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var l=u;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"035c":function(e,t,n){"use strict";n("a001")},"0482":function(e,t,n){},"0681":function(e,t,n){"use strict";n("c6e7")},"20a8":function(e,t,n){"use strict";n("f3b3")},"253d":function(e,t,n){},"3caa":function(e,t,n){},4678:function(e,t,n){var r={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-ps":"4c98","./ar-ps.js":"4c98","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku-kmr":"7558","./ku-kmr.js":"7558","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(e){var t=s(e);return n(t)}function s(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=s,e.exports=a,a.id="4678"},"550a":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var r,a=n("2b0e"),s=n("ce5b"),i=n.n(s),o=(n("bf40"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{id:"app"}},[n("v-navigation-drawer",{attrs:{clipped:"",app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[n("v-list",{attrs:{dense:""}},[n("v-list-tile",{attrs:{to:{path:"/monitoring"}}},[n("v-list-tile-action",[n("v-icon",[e._v("dashboard")])],1),n("v-list-tile-content",[n("v-list-tile-title",[e._v("Monitoring")])],1)],1),n("v-list-tile",{attrs:{to:{path:"/train"}}},[n("v-list-tile-action",[n("v-icon",[e._v("train")])],1),n("v-list-tile-content",[n("v-list-tile-title",[e._v("Train")])],1)],1),n("v-list-tile",{attrs:{to:{path:"/home-automation"}}},[n("v-list-tile-action",[n("v-icon",[e._v("home")])],1),n("v-list-tile-content",[n("v-list-tile-title",[e._v("Domotique")])],1)],1),n("v-list-tile",{attrs:{to:{path:"/family"}}},[n("v-list-tile-action",[n("v-icon",[e._v("trending_up")])],1),n("v-list-tile-content",[n("v-list-tile-title",[e._v("Famille")])],1)],1),n("v-list-tile",{attrs:{to:{path:"/sms"}}},[n("v-list-tile-action",[n("v-icon",[e._v("message")])],1),n("v-list-tile-content",[n("v-list-tile-title",[e._v("SMS")])],1)],1)],1)],1),n("v-toolbar",{attrs:{color:"indigo",dark:"",app:""}},[n("v-toolbar-side-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),n("v-toolbar-title",[e._v("Services Aumjaud")]),n("v-spacer"),n("v-toolbar-items",[n("v-menu",{attrs:{"offset-y":""}})],1)],1),n("v-content",[n("v-container",{attrs:{fluid:""}},[n("router-view")],1)],1),n("v-footer",{attrs:{color:"indigo",app:""}},[n("span",{staticClass:"white--text"},[e._v("© aumjaud 2018")])])],1)}),u=[],c={data:function(){return{drawer:null}}},l=c,d=(n("8777"),n("2877")),p=Object(d["a"])(l,o,u,!1,null,null,null),f=p.exports,m=n("8c4f"),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",[e._v("Monitoring")]),n("v-alert",{attrs:{transition:"fade-transition",value:e.dialogIsVisible,type:e.dialogType}},[e._v(e._s(e.dialogMsg))]),n("div",{staticClass:"monitoring"},e._l(e.apps,(function(t){return n("monitoring-app",{key:t.uid,attrs:{app:t,isConnected:e.isConnected},on:{showDialog:e.showDialog}})})),1)],1)},v=[],b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app",class:e.app.status},[n("div",{staticClass:"title"},[e._v(e._s(e.app.name))]),e.app.infos?n("div",{staticClass:"infos"},[e._v(e._s(e.app.infos.version)+" - "+e._s(e.app.infos.buildDate))]):e._e(),n("div",{staticClass:"error"},[e._v(e._s(e.app.error))]),e.isConnected?n("div",{staticClass:"actions"},e._l(e.app.actions,(function(t){return n("button",{key:t.method,attrs:{type:"button"},on:{click:function(n){return e.doAction(e.app,t)}}},[e._v(e._s(t.name))])})),0):e._e()])},g=[],y=(n("7f7f"),n("96cf"),n("3b8d")),w=n("7618"),j=(n("28a5"),!1);function _(){return JSON.parse(atob(r.split(".")[1]))}function x(){return null!=r?_().login:null}function k(){return null!=r&&1e3*_().exp-5e3>Date.now()}function C(){return k()&&1e3*_().exp-6e4<Date.now()}function R(e,t){return T.apply(this,arguments)}function T(){return T=Object(y["a"])(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.info("Try to login with user '%s'",t),e.prev=1,e.next=4,q("api-authenticate","userSign",{method:"POST",body:"login="+encodeURIComponent(t)+"&password="+encodeURIComponent(n)});case 4:return a=e.sent,r=a.token,e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e["catch"](1),console.error(e.t0),r=null,e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])}))),T.apply(this,arguments)}function O(){return A.apply(this,arguments)}function A(){return A=Object(y["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!j){e.next=2;break}return e.abrupt("return");case 2:return j=!0,t=x(),console.info("Token will expire soon, renew it with user '%s'",t),e.prev=5,e.next=8,L("api-authenticate","secure/renewUserSign",{method:"POST",body:"login="+encodeURIComponent(t)});case 8:n=e.sent,r=n.token,e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](5),console.error(e.t0);case 15:return e.prev=15,j=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[5,12,15,18]])}))),A.apply(this,arguments)}function D(){k()||(window.location="/#/sign-in"),C()&&O()}function z(e,t){return D(),P(t,"Authorization","Bearer "+r),window.fetch(e,t)}function S(e){return"object"===Object(w["a"])(e)}function P(e,t,n){e.headers||(e.headers={}),e.headers[t]=n}function E(e,t,n,r){return P(r,"Accept","application/json"),M(e,t,n,r).then((function(e){if(e.status>=200&&e.status<300)return e.json();throw e.status}))}function F(e,t,n,r){return M(e,t,n,r).then((function(e){if(e.status>=200&&e.status<300)return e.text();throw e.status}))}function M(e,t,n,r){return r.body&&(S(r.body)?(P(r,"Content-Type","application/json; charset=UTF-8"),r.body=JSON.stringify(r.body)):P(r,"Content-Type","application/x-www-form-urlencoded; charset=UTF-8")),e("https://"+t+".aumjaud.fr/"+n,r)}function I(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return M(window.fetch,e,t,n)}function N(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return M(z,e,t,n)}function q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return E(window.fetch,e,t,n)}function L(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return E(z,e,t,n)}function $(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return F(window.fetch,e,t,n)}function V(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return F(z,e,t,n)}var H={isTokenValid:k,getTokenLogin:x,auth:R,secureAccess:D,secureFetch:N,unsecureFetch:I,secureFetchJson:L,unsecureFetchJson:q,unsecureFetchText:$,secureFetchText:V};function U(){var e=[{uid:"api-authenticate",name:"API Authenticate",actions:[{name:"Reload Config",methodType:"text",method:"secure/reloadConfig"}]},{uid:"api-docker",name:"API Docker",actions:[{name:"Reload Config",methodType:"text",method:"secure/reloadConfig"}]},{uid:"api-synology-chatbot",name:"API Synology Chatbot",actions:[{name:"Reload Config",methodType:"text",method:"secure/reloadConfig"}]},{uid:"api-family",name:"API Family",actions:[{name:"Reload Config",methodType:"text",method:"secure/reloadConfig"},{name:"Reset Cache",methodType:"text",method:"secure/resetCache"}]},{uid:"api-home-security",name:"API Home Security",actions:[{name:"Reload Config",methodType:"text",method:"secure/reloadConfig"}]},{uid:"api-nabaztag",name:"API Nabaztag",actions:[{name:"Reload Config",methodType:"text",method:"secure/reloadConfig"}]},{uid:"api-shopping-list",name:"API Shopping List",actions:[{name:"Reload Config",methodType:"text",method:"secure/reloadConfig"},{name:"Reset Cache",methodType:"text",method:"secure/resetCache"}]}];return e.forEach((function(e){e.status="unknown",H.unsecureFetchJson(e.uid,"info").then((function(t){e.status="ok",e.infos=t})).catch((function(t){e.status="error",e.error=t.message}))})),e}function J(e,t){return B.apply(this,arguments)}function B(){return B=Object(y["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.t0=n.methodType,e.next="text"===e.t0?3:"json"===e.t0?7:11;break;case 3:return e.next=5,H.secureFetchText(t.uid,n.method);case 5:return r=e.sent,e.abrupt("break",11);case 7:return e.next=9,H.secureFetchJson(t.uid,n.method);case 9:return r=e.sent,e.abrupt("break",11);case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}}),e)}))),B.apply(this,arguments)}var W={getApps:U,doAction:J},Y={name:"monitoring-app",props:{app:{type:Object,required:!0},isConnected:{type:Boolean,required:!0}},methods:{doAction:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.doAction(t,n);case 3:r=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),r=e.t0;case 9:this.$emit("showDialog",{message:t.name+" - "+n.name+": "+r,messageType:"success"});case 10:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(t,n){return e.apply(this,arguments)}return t}()}},G=Y,K=(n("9a7d"),Object(d["a"])(G,b,g,!1,null,"6ef31faf",null)),Q=K.exports,X={name:"monitoring",data:function(){return{dialogIsVisible:!1,dialogMsg:"",dialogType:"success",apps:[],isConnected:!1}},created:function(){this.apps=W.getApps(),this.isConnected=H.isTokenValid()},methods:{showDialog:function(e){this.dialogIsVisible=!0,this.dialogMsg=e.message,this.dialogType=e.messageType,setTimeout(function(){this.dialogIsVisible=!1}.bind(this),2e3)}},components:{MonitoringApp:Q}},Z=X,ee=(n("c6cc"),Object(d["a"])(Z,h,v,!1,null,"925d2cc0",null)),te=ee.exports,ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",[e._v("Connexion")]),n("form",[n("fieldset",[n("label",[e._v("Login")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.login,expression:"login"}],attrs:{type:"text",name:"login",placeholder:"Votre nom..",required:"required"},domProps:{value:e.login},on:{input:function(t){t.target.composing||(e.login=t.target.value)}}})]),n("fieldset",[n("label",[e._v("Mot de passe")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",name:"password",placeholder:"Votre mot de passe...",required:"required"},domProps:{value:e.password},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.connect()},input:function(t){t.target.composing||(e.password=t.target.value)}}})]),n("div",{staticClass:"failed",domProps:{innerHTML:e._s(e.error)}}),n("button",{attrs:{type:"button"},on:{click:function(t){return e.connect()}}},[e._v("Se connecter")])])])},re=[],ae={name:"signin",data:function(){return{login:null,password:null,error:""}},methods:{connect:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=[],""==this.login&&t.push("Entrez un nom"),""==this.password&&t.push("Entrez un mot de passe"),!(t.length>0)){e.next=7;break}this.error="Erreur dans le formulaire : <ul><li>"+t.join("<li>")+"</ul>",e.next=11;break;case 7:return e.next=9,H.auth(this.login,this.password);case 9:n=e.sent,n?this.$router.go(-1):this.error="Echec d'authentification";case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},se=ae,ie=Object(d["a"])(se,ne,re,!1,null,"caddae40",null),oe=ie.exports,ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",[e._v("Famille")]),n("div",[n("router-link",{attrs:{to:"/family-form",tag:"button"}},[e._v("Nouvelle entrée")]),n("router-link",{attrs:{to:"/family-history",tag:"button"}},[e._v("Historique")]),n("table",[e._m(0),e._l(["Antoine","Camille","Kyllian","Enola","Maelynn"],(function(t){return e.lastData[t]?n("tr",{key:t},[n("td",[n("span",{staticClass:"value"},[e._v(e._s(t))])]),n("td",[e.lastData[t]["size"]?n("div",[n("span",{staticClass:"value"},[e._v(e._s(e.lastData[t].size.m)+"."+e._s(e.lastData[t].size.cm)+"m ")]),n("span",{staticClass:"date"},[e._v("le "+e._s(e.convertDate(e.lastData[t].size.date)))])]):e._e()]),n("td",[e.lastData[t]["weight"]?n("div",[n("span",{staticClass:"value"},[e._v(e._s(e.lastData[t]["weight"].kg)+"."+e._s(e.lastData[t]["weight"].g)+"kg ")]),n("span",{staticClass:"date"},[e._v("le "+e._s(e.convertDate(e.lastData[t]["weight"].date)))])]):e._e()]),n("td",[e.lastData[t]["shoes-size"]?n("div",[n("span",{staticClass:"value"},[e._v(e._s(e.lastData[t]["shoes-size"].number)+" ")]),n("span",{staticClass:"date"},[e._v("le "+e._s(e.convertDate(e.lastData[t]["shoes-size"].date)))])]):e._e()])]):e._e()}))],2)],1)])},ce=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tr",[n("th",[e._v("Nom")]),n("th",[e._v("Taille")]),n("th",[e._v("Poids")]),n("th",[e._v("Pointure")])])}];function le(){return de.apply(this,arguments)}function de(){return de=Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,H.secureFetchJson("api-family","secure/members");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),de.apply(this,arguments)}function pe(){return fe.apply(this,arguments)}function fe(){return fe=Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,H.secureFetchJson("api-family","secure/members?filter=last");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),fe.apply(this,arguments)}function me(e,t,n){return he.apply(this,arguments)}function he(){return he=Object(y["a"])(regeneratorRuntime.mark((function e(t,n,r){var a,s,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.split("."),s=a[0],i=a.length>0?a[1]:"",e.next=5,H.secureFetch("api-family","secure/sizes",{method:"POST",body:{firstname:t,m:s,cm:i,date:r.getTime()}});case 5:return o=e.sent,e.abrupt("return",200==o.status);case 7:case"end":return e.stop()}}),e)}))),he.apply(this,arguments)}function ve(e,t,n){return be.apply(this,arguments)}function be(){return be=Object(y["a"])(regeneratorRuntime.mark((function e(t,n,r){var a,s,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.split("."),s=a[0],i=a.length>0?a[1]:"",e.next=5,H.secureFetch("api-family","secure/weights",{method:"POST",body:{firstname:t,kg:s,g:i,date:r.getTime()}});case 5:return o=e.sent,e.abrupt("return",200==o.status);case 7:case"end":return e.stop()}}),e)}))),be.apply(this,arguments)}function ge(e,t,n){return ye.apply(this,arguments)}function ye(){return ye=Object(y["a"])(regeneratorRuntime.mark((function e(t,n,r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,H.secureFetch("api-family","secure/shoes-sizes",{method:"POST",body:{firstname:t,number:n,date:r.getTime()}});case 2:return a=e.sent,e.abrupt("return",200==a.status);case 4:case"end":return e.stop()}}),e)}))),ye.apply(this,arguments)}var we,je,_e={getAll:le,getLast:pe,saveSize:me,saveWeight:ve,saveShoesSize:ge},xe={name:"family",data:function(){return{lastData:[]}},created:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,_e.getLast();case 2:this.lastData=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{convertDate:function(e){function t(e){return e<10?"0"+e:e}var n=new Date(e);return[t(n.getDate()),t(n.getMonth()+1),n.getYear()-100].join("/")}}},ke=xe,Ce=(n("be56"),Object(d["a"])(ke,ue,ce,!1,null,"6326f8dd",null)),Re=Ce.exports,Te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",[e._v("Famille - Nouvelle entrée")]),n("form",[n("fieldset",[n("label",[e._v("Nom")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.name=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"Maelynn"}},[e._v("Maelynn")]),n("option",{attrs:{value:"Enola"}},[e._v("Enola")]),n("option",{attrs:{value:"Kyllian"}},[e._v("Kyllian")]),n("option",{attrs:{value:"Camille"}},[e._v("Camille")]),n("option",{attrs:{value:"Antoine"}},[e._v("Antoine")])])]),n("fieldset",[n("label",[e._v("Type")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.type,expression:"type"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.type=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"weight"}},[e._v("Poids")]),n("option",{attrs:{value:"size"}},[e._v("Taille")]),n("option",{attrs:{value:"shoes-size"}},[e._v("Pointure")])])]),n("fieldset",[null!=e.type?n("label",[e._v("Valeur")]):e._e(),"weight"==e.type?n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],attrs:{type:"number",step:"0.01",min:"2",max:"100",placeholder:"en kg",required:"required"},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}}):e._e(),"size"==e.type?n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],attrs:{type:"number",step:"0.01",min:"0.3",max:"2",placeholder:"en mètre",required:"required"},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}}):e._e(),"shoes-size"==e.type?n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],attrs:{type:"number",step:"1",min:"10",max:"50",required:"required"},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}}):e._e()]),n("fieldset",[n("label",[e._v("Date")]),n("input",{attrs:{type:"date",required:"required"},domProps:{value:e.date&&e.date.toISOString().split("T")[0]},on:{input:function(t){e.date=t.target.valueAsDate}}})]),n("div",{staticClass:"failed",domProps:{innerHTML:e._s(e.error)}}),n("button",{attrs:{type:"button"},on:{click:function(t){return e.save()}}},[e._v("Sauvegarder")]),n("router-link",{attrs:{to:"/family",tag:"button"}},[e._v("Retour")])],1)])},Oe=[],Ae={name:"family-form",data:function(){return{name:null,type:null,value:null,date:new Date,error:""}},created:function(){H.secureAccess()},methods:{save:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=[],null==this.name&&t.push("Sélectionnez un nom"),null==this.type&&t.push("Sélectionnez un type"),isNaN(parseFloat(this.value))&&t.push("Entrez un nombre valide"),!(t.length>0)){e.next=8;break}this.error="Erreur dans le formulaire : <ul><li>"+t.join("<li>")+"</ul>",e.next=24;break;case 8:e.t0=this.type,e.next="weight"===e.t0?11:"size"===e.t0?15:"shoes-size"===e.t0?19:23;break;case 11:return e.next=13,_e.saveWeight(this.name,this.value,this.date);case 13:return n=e.sent,e.abrupt("break",23);case 15:return e.next=17,_e.saveSize(this.name,this.value,this.date);case 17:return n=e.sent,e.abrupt("break",23);case 19:return e.next=21,_e.saveShoesSize(this.name,this.value,this.date);case 21:return n=e.sent,e.abrupt("break",23);case 23:n?this.$router.push({path:"family"}):this.error="La sauvegarde a échouée";case 24:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},De=Ae,ze=(n("eb7a"),Object(d["a"])(De,Te,Oe,!1,null,"57706efd",null)),Se=ze.exports,Pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",[e._v("Famille - Historique")]),n("h3",[e._v("Poids")]),e.loaded?n("family-history-chart",{attrs:{chartData:e.chartDataWeight}}):e._e(),n("h3",[e._v("Taille")]),e.loaded?n("family-history-chart",{attrs:{chartData:e.chartDataSize}}):e._e()],1)},Ee=[],Fe=(n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("6b54"),n("1fca")),Me={name:"family-history-chart",extends:Fe["a"],props:{chartData:{type:Array,required:!0}},computed:{datasets:function(){return this.chartData.map((function(e){return{data:e.data,label:e.name,borderColor:e.color,pointBorderColor:e.color,pointBackgroundColor:"white",borderWidth:2,backgroundColor:"transparent"}}))}},mounted:function(){this.renderChart({datasets:this.datasets},{scales:{yAxes:[{gridLines:{display:!0}}],xAxes:[{type:"time",gridLines:{display:!1},time:{unit:"month",displayFormats:{quarter:"MMM YYYY"}}}]},legend:{display:!0},responsive:!0,maintainAspectRatio:!1})}},Ie=Me,Ne=Object(d["a"])(Ie,we,je,!1,null,"b3dff1e6",null),qe=Ne.exports;function Le(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=$e(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){o=!0,s=e},f:function(){try{i||null==n.return||n.return()}finally{if(o)throw s}}}}function $e(e,t){if(e){if("string"===typeof e)return Ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ve(e,t):void 0}}function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var He={name:"family-history",data:function(){return{loaded:!1,allData:[],chartDataSize:[],chartDataWeight:[],usersInfo:[{name:"Antoine",color:"#0B8043"},{name:"Camille",color:"#d81b60"},{name:"Kyllian",color:"#3F51B5"},{name:"Enola",color:"#8e24aa"},{name:"Maelynn",color:"#9e68af"}]}},methods:{render:function(){function e(e){return e.m||(e.m=0),e.cm||(e.cm=0),parseFloat(e.m+"."+e.cm)}function t(e){return e.kg||(e.kg=0),e.g||(e.g=0),parseFloat(e.kg+"."+e.g)}this.loaded=!1;var n,r=Le(this.usersInfo);try{for(r.s();!(n=r.n()).done;){var a=n.value;this.allData[a.name].size&&this.chartDataSize.push({name:a.name,data:this.allData[a.name].size.map((function(t){return{t:new Date(t.date),y:e(t)}})),color:a.color}),this.allData[a.name].weight&&this.chartDataWeight.push({name:a.name,data:this.allData[a.name].weight.map((function(e){return{t:new Date(e.date),y:t(e)}})),color:a.color})}}catch(s){r.e(s)}finally{r.f()}this.loaded=!0}},created:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,_e.getAll();case 2:this.allData=e.sent,this.render();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),components:{FamilyHistoryChart:qe}},Ue=He,Je=Object(d["a"])(Ue,Pe,Ee,!1,null,"5bb5680e",null),Be=Je.exports,We=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",[e._v("Domotique")]),n("div",{staticClass:"bloc"},[n("home-security")],1),n("div",{staticClass:"bloc"},[n("home-nabaztag")],1)])},Ye=[],Ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",[e._v("Securité")]),e.isActivated?n("div",[e._v("\n    La sécurité est ACTIVE. "),n("br"),n("button",{staticClass:"deactivate",attrs:{type:"button"},on:{click:function(t){return e.deactivate()}}},[e._v("DESACTIVER")])]):n("div",[e._v("\n    La sécurité est désactivée. "),n("br"),n("button",{staticClass:"activate",attrs:{type:"button"},on:{click:function(t){return e.activate()}}},[e._v("ACTIVER")])]),n("button",{attrs:{type:"button"},on:{click:function(t){return e.onCameraClickView("salon")}}},[e._v("Camera salon")]),n("button",{attrs:{type:"button"},on:{click:function(t){return e.onCameraClickView("bureau")}}},[e._v("Camera bureau")]),n("v-dialog",{model:{value:e.viewCamera,callback:function(t){e.viewCamera=t},expression:"viewCamera"}},[n("v-card",[n("v-card-text",[n("img",{attrs:{src:e.srcCamera}})]),n("v-card-actions",[n("v-btn",{on:{click:function(t){e.viewCamera=!1}}},[e._v("Fermer")])],1)],1)],1)],1)},Ke=[];function Qe(){return Xe.apply(this,arguments)}function Xe(){return Xe=Object(y["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,H.secureFetchText("api-home-security","secure/isActivated");case 2:return t=e.sent,e.abrupt("return","true"===t);case 4:case"end":return e.stop()}}),e)}))),Xe.apply(this,arguments)}function Ze(){return et.apply(this,arguments)}function et(){return et=Object(y["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,H.secureFetchText("api-home-security","secure/activate?isImediate=true");case 2:return t=e.sent,e.abrupt("return","activated"===t);case 4:case"end":return e.stop()}}),e)}))),et.apply(this,arguments)}function tt(e){return nt.apply(this,arguments)}function nt(){return nt=Object(y["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,H.secureFetchText("api-home-security","secure/desactivate?id="+t);case 2:return n=e.sent,e.abrupt("return","deactivated"===n);case 4:case"end":return e.stop()}}),e)}))),nt.apply(this,arguments)}var rt={isActivated:Qe,activate:Ze,deactivate:tt},at={name:"home-security",data:function(){return{isActivated:!1,viewCamera:!1,srcCamera:""}},created:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,rt.isActivated();case 2:this.isActivated=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{activate:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,rt.activate();case 2:this.isActivated=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),deactivate:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=H.getTokenLogin(),e.next=3,rt.deactivate(t);case 3:this.isActivated=!e.sent;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onCameraClickView:function(e){this.viewCamera=!0,this.refreshImageCamera(e)},refreshImageCamera:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(t){var n,r,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.viewCamera){e.next=2;break}return e.abrupt("return");case 2:e.t0=t,e.next="salon"===e.t0?5:"bureau"===e.t0?7:9;break;case 5:return n="Salon",e.abrupt("break",9);case 7:return n="Burea",e.abrupt("break",9);case 9:return e.prev=9,e.next=12,H.secureFetch("api-home-security","/secure/camera/camera_"+n+".jpg");case 12:if(r=e.sent,!r.ok){e.next=22;break}return e.t1=URL,e.next=17,r.blob();case 17:e.t2=e.sent,this.srcCamera=e.t1.createObjectURL.call(e.t1,e.t2),setTimeout((function(){return a.refreshImageCamera(t)}),200),e.next=23;break;case 22:console.error("Can't read image from network",r);case 23:e.next=28;break;case 25:e.prev=25,e.t3=e["catch"](9),console.error("Error while fetching",e.t3);case 28:case"end":return e.stop()}}),e,this,[[9,25]])})));function t(t){return e.apply(this,arguments)}return t}()}},st=at,it=(n("b9a5"),Object(d["a"])(st,Ge,Ke,!1,null,"6de1f282",null)),ot=it.exports,ut=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",[e._v("Nabaztag")]),n("form",[n("fieldset",[n("label",[e._v("Message")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],attrs:{type:"text",required:"required"},domProps:{value:e.message},on:{input:function(t){t.target.composing||(e.message=t.target.value)}}})]),n("div",{staticClass:"failed",domProps:{innerHTML:e._s(e.error)}}),n("button",{attrs:{type:"button"},on:{click:function(t){return e.send()}}},[e._v("Envoyer")])])])},ct=[];function lt(e){return dt.apply(this,arguments)}function dt(){return dt=Object(y["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,H.secureFetch("api-nabaztag","secure/sendMessage",{method:"POST",body:{message:t}});case 2:return n=e.sent,e.abrupt("return",200==n.status);case 4:case"end":return e.stop()}}),e)}))),dt.apply(this,arguments)}var pt={sendMessage:lt},ft={name:"home-nabaztag",data:function(){return{message:null,error:""}},methods:{send:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=[],null!=this.message&&""!=this.message.trim()){e.next=5;break}t.push("Entrer un message"),e.next=9;break;case 5:return e.next=7,pt.sendMessage(this.message);case 7:n=e.sent,this.error=n?"":"L'envoie a échouée";case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},mt=ft,ht=(n("20a8"),Object(d["a"])(mt,ut,ct,!1,null,"de9146ea",null)),vt=ht.exports,bt={name:"home-automation",created:function(){H.secureAccess()},components:{HomeSecurity:ot,HomeNabaztag:vt}},gt=bt,yt=(n("7221"),Object(d["a"])(gt,We,Ye,!1,null,"cfd3209a",null)),wt=yt.exports,jt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",[e._v("Envoyer un SMS")]),n("form",[n("fieldset",[n("label",[e._v("Destinataire")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.name=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"maelynn"}},[e._v("Maelynn")]),n("option",{attrs:{value:"enola"}},[e._v("Enola")]),n("option",{attrs:{value:"kyllian"}},[e._v("Kyllian")]),n("option",{attrs:{value:"camille"}},[e._v("Camille")]),n("option",{attrs:{value:"antoine"}},[e._v("Antoine")])])]),n("fieldset",[n("label",[e._v("Message")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],attrs:{type:"text",required:"required"},domProps:{value:e.message},on:{input:function(t){t.target.composing||(e.message=t.target.value)}}})]),n("div",{staticClass:"failed",domProps:{innerHTML:e._s(e.error)}}),n("button",{attrs:{type:"button"},on:{click:function(t){return e.send()}}},[e._v("Envoyer")])])])},_t=[];function xt(e,t){return kt.apply(this,arguments)}function kt(){return kt=Object(y["a"])(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=H.getTokenLogin(),e.next=3,H.secureFetch("api-home-security","/secure/message/sms?user="+t+"&message="+encodeURI(n)+". "+r);case 3:return a=e.sent,e.abrupt("return",200==a.status);case 5:case"end":return e.stop()}}),e)}))),kt.apply(this,arguments)}var Ct={sendMessage:xt},Rt={name:"sms",data:function(){return{name:null,message:null,error:""}},created:function(){H.secureAccess()},methods:{send:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=[],null==this.name&&t.push("Sélectionnez un nom"),null!=this.message&&""!=this.message.trim()||t.push("Entrez un message"),!(t.length>0)){e.next=7;break}this.error="Erreur dans le formulaire : <ul><li>"+t.join("<li>")+"</ul>",e.next=11;break;case 7:return e.next=9,Ct.sendMessage(this.name,this.message);case 9:n=e.sent,n?(this.error="",this.message=""):this.error="L'envoie a échouée";case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},Tt=Rt,Ot=(n("0681"),Object(d["a"])(Tt,jt,_t,!1,null,"8290424a",null)),At=Ot.exports,Dt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",[e._v("Trains")]),n("h3",[e._v("Gare")]),e._v("\n  Gare la plus proche : \n  "),n("span",{staticClass:"town"},[e._v(e._s(e.nearestStation.town))]),e._l(e.nextTrains.disruptions,(function(t){return n("v-alert",{key:t,attrs:{value:!0,type:"error"}},[e._v("\n    "+e._s(t)+"\n  ")])})),n("h3",[e._v("Prochains départs")]),e._l(e.nextTrains.directions,(function(t){return n("table",{key:t},[n("tr",[n("th",{attrs:{colspan:"2"}},[e._v(e._s(t))])]),e._l(e.nextTrains.nextDepatures,(function(r){return r.direction==t?n("tr",{key:r.date},[n("td",[n("img",{attrs:{src:"images/trains/RER_"+r.code+".png"}})]),n("td",[e._v(e._s(e.displayDate(r.date)))])]):e._e()}))],2)}))],2)},zt=[];n("ac6a"),n("4f7f");function St(){return Pt.apply(this,arguments)}function Pt(){return Pt=Object(y["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!navigator.geolocation){e.next=18;break}return e.next=3,qt();case 3:return t=e.sent,e.next=6,window.fetch("https://ressources.data.sncf.com/api/records/1.0/search/?dataset=sncf-gares-et-arrets-transilien-ile-de-france&lang=fr&rows=1&facet=code_uic&facet=nom_gare&geofilter.distance="+t.coords.latitude+","+t.coords.longitude+", 2000");case 6:return n=e.sent,e.next=9,n.json();case 9:if(r=e.sent,!(200==n.status&1===r.nhits)){e.next=15;break}return a=r.records[0].fields,e.abrupt("return",{uic:a.code_uic,town:a.commune});case 15:throw"SNCF DATA API returns "+n.status+": "+n.json();case 16:e.next=19;break;case 18:throw"Geolocation is not supported by this browser.";case 19:case"end":return e.stop()}}),e)}))),Pt.apply(this,arguments)}function Et(e){return Ft.apply(this,arguments)}function Ft(){return Ft=Object(y["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,s,i,o,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Lt();case 2:return n=e.sent,r=Mt(new Date),e.next=6,window.fetch("https://api.sncf.com/v1/coverage/sncf/stop_areas/stop_area:OCE:SA:"+t+"/departures?datetime="+r,{method:"GET",headers:new Headers([["Authorization","Basic "+btoa(n)]])});case 6:a=e.sent,e.t0=a.status,e.next=401===e.t0?10:403===e.t0?11:404===e.t0?16:406===e.t0?17:500===e.t0?18:503===e.t0?19:20;break;case 10:throw"Authentication failed or missing (invalid API key?)";case 11:if(!a.headers["Retry-After"]){e.next=15;break}throw"API call quota exceeded (retry after $retry_after s)";case 15:throw"Forbidden (invalid station or other error)";case 16:throw"Invalid path supplied to API call";case 17:throw"Unsupported version";case 18:throw"API is broken";case 19:throw"API is overloaded";case 20:return e.abrupt("break",21);case 21:return e.next=23,a.json();case 23:return s=e.sent,i=s.disruptions,o=new Set,u=[],s.departures.forEach((function(e){o.add(e.display_informations.direction),u.push({code:e.display_informations.code,direction:e.display_informations.direction,date:It(e.stop_date_time.departure_date_time)})})),e.abrupt("return",{disruptions:i,directions:Array.from(o),nextDepatures:u});case 29:case"end":return e.stop()}}),e)}))),Ft.apply(this,arguments)}function Mt(e){return e.getFullYear()+Nt(e.getMonth()+1)+Nt(e.getDate())+"T"+Nt(e.getHours())+Nt(e.getMinutes())+Nt(e.getSeconds())}function It(e){var t=e.substr(0,4),n=e.substr(4,2),r=e.substr(6,2),a=e.substr(9,2),s=e.substr(11,2),i=e.substr(12,2);return new Date(t,n-1,r,a,s,i).getTime()}function Nt(e){return e<10?"0"+e:e}function qt(e){return new Promise((function(t,n){navigator.geolocation.getCurrentPosition(t,n,e)}))}function Lt(){return $t.apply(this,arguments)}function $t(){return $t=Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,H.secureFetchText("api-secrets","secure/properties/sncf.token",{method:"GET"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),$t.apply(this,arguments)}var Vt={getNearestStation:St,getNextTrains:Et},Ht={name:"train",data:function(){return{nearestStation:{town:""},nextTrains:{disruptions:[],directions:[],nextDepatures:[]}}},created:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Vt.getNearestStation();case 2:return this.nearestStation=e.sent,e.next=5,Vt.getNextTrains(this.nearestStation.uic);case 5:this.nextTrains=e.sent;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{displayDate:function(e){var t=new Date(e);return t.getHours()+":"+t.getMinutes()}}},Ut=Ht,Jt=(n("035c"),Object(d["a"])(Ut,Dt,zt,!1,null,"62a361a0",null)),Bt=Jt.exports;a["default"].use(m["a"]);var Wt=new m["a"]({routes:[{path:"/monitoring",name:"monitoring",component:te,alias:"/"},{path:"/sign-in",name:"signin",component:oe},{path:"/home-automation",name:"home-automation",component:wt},{path:"/family",name:"family",component:Re},{path:"/family-history",name:"family-history",component:Be},{path:"/family-form",name:"family-form",component:Se},{path:"/sms",name:"sms",component:At},{path:"/train",name:"train",component:Bt}]});a["default"].use(i.a),new a["default"]({render:function(e){return e(f)},router:Wt}).$mount("#app")},7221:function(e,t,n){"use strict";n("cdeb")},8777:function(e,t,n){"use strict";n("0482")},"9a7d":function(e,t,n){"use strict";n("3caa")},a001:function(e,t,n){},b9a5:function(e,t,n){"use strict";n("e32e")},be56:function(e,t,n){"use strict";n("253d")},c6cc:function(e,t,n){"use strict";n("fb43")},c6e7:function(e,t,n){},cdeb:function(e,t,n){},e32e:function(e,t,n){},eb7a:function(e,t,n){"use strict";n("550a")},f3b3:function(e,t,n){},fb43:function(e,t,n){}});
//# sourceMappingURL=app.0fe85dce.js.map